<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FridgeChef P0 MVP ìµœì¢… (í”„ë¡ íŠ¸ì—”ë“œ ë…ë¦½)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body { font-family: 'Malgun Gothic', 'Arial', sans-serif; padding: 20px; background-color: #f0f3f6; }
        .container { max-width: 900px; margin: auto; background: #fff; padding: 30px; border-radius: 12px; box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1); }
        h1 { color: #007bff; text-align: center; margin-bottom: 30px; }
        h2 { border-bottom: 3px solid #007bff; padding-bottom: 8px; margin-bottom: 25px; color: #333; font-weight: bold; }
        button { padding: 10px 15px; background-color: #007bff; color: white; border: none; border-radius: 6px; cursor: pointer; margin-top: 10px; margin-right: 10px; font-size: 14px; transition: background-color 0.3s; }
        button:hover { background-color: #0056b3; }
        textarea, input[type="text"], select { width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; }
        .section { margin-bottom: 40px; padding: 20px; border: 1px dashed #a0c4ff; border-radius: 8px; background: #fafcff; }
        .user-info { margin-bottom: 25px; padding: 15px; border: 1px solid #ddd; background: #f9f9f9; border-radius: 6px; }

        /* PRD ë°˜ì˜: ì¬ë£Œ ë“±ë¡ 3ê°€ì§€ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .register-options { display: flex; justify-content: space-between; margin-bottom: 30px; }
        .register-btn { flex-basis: 30%; text-align: center; padding: 15px 10px; border: 1px solid #ddd; background-color: #f8f8f8; border-radius: 10px; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; }
        .register-btn:hover { transform: translateY(-3px); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); }
        .register-btn .icon { font-size: 32px; margin-bottom: 5px; color: #007bff; }
        .register-btn p { margin: 0; font-weight: bold; font-size: 14px; color: #333; }
        
        /* PRD ë°˜ì˜: ì•Œë ˆë¥´ê¸°/ë„êµ¬ ì„ íƒ ìŠ¤íƒ€ì¼ */
        .select-group { margin-bottom: 15px; border: 1px solid #eee; padding: 10px; border-radius: 6px; background: #fff; }
        .select-group label { display: block; font-weight: bold; margin-bottom: 8px; color: #555; }
        #allergy-input-section { display: none; margin-top: 10px; padding: 10px; border-top: 1px dashed #ccc; }

        /* ë ˆì‹œí”¼ UI ìŠ¤íƒ€ì¼ */
        .recipe-card { border: 2px solid #28a745; padding: 20px; border-radius: 10px; margin-top: 20px; background: #ffffff; }
        .recipe-card h3 { color: #28a745; margin-top: 0; border-bottom: 1px dashed #ccc; padding-bottom: 5px; }
        .recipe-meta span { display: inline-block; margin-right: 15px; font-size: 14px; color: #666; }
        .utilization-rate { font-weight: bold; color: #155724; font-size: 16px; border: 1px solid #28a745; padding: 5px; border-radius: 4px; display: inline-block; margin-bottom: 10px; background-color: #d4edda; }
        .chat-log { border: 1px solid #0056b3; padding: 10px; border-radius: 8px; margin-top: 15px; background: #e6f7ff; max-height: 200px; overflow-y: auto; }
        .chat-user { text-align: right; color: #007bff; margin-bottom: 5px; font-weight: bold; }
        .chat-ai { text-align: left; color: #28a745; margin-bottom: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>FridgeChef P0 ìµœì¢… ì‹œì—°</h1>
        <div class="user-info">
            <p>í˜„ì¬ ì‚¬ìš©ì ID: <strong id="user-id-display">ë¡œë”© ì¤‘...</strong></p>
            <p><strong>ğŸš¨ ì´ ì½”ë“œëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ëª¨ë“  ê¸°ëŠ¥ì„ ì‹œë®¬ë ˆì´ì…˜í•©ë‹ˆë‹¤.</strong></p>
        </div>

        <div class="section">
            <h2>1. ğŸ§Š ë‚˜ì˜ ëƒ‰ì¥ê³ : ê°„í¸ ì¬ë£Œ ë“±ë¡ ì‹œìŠ¤í…œ</h2>
            <div class="register-options">
                <div class="register-btn" onclick="simulateRegisterMode('photo')">
                    <span class="icon"><i class="fas fa-camera"></i></span>
                    <p>ëƒ‰ì¥ê³  ì¬ë£Œ ì´¬ì˜</p>
                </div>
                <div class="register-btn" onclick="simulateRegisterMode('receipt')">
                    <span class="icon"><i class="fas fa-receipt"></i></span>
                    <p>ì˜ìˆ˜ì¦ ë‚´ìš© ìŠ¤ìº”</p>
                </div>
                <div class="register-btn" onclick="showManualInput()">
                    <span class="icon">T</span>
                    <p>ì§ì ‘ ì…ë ¥</p>
                </div>
            </div>

            <div id="manual-input-section" style="display:none; border-top: 1px solid #ddd; padding-top: 15px;">
                <h3>ğŸ“ ì¬ë£Œ ì§ì ‘ ì…ë ¥</h3>
                <p>ì¬ë£Œëª…: <input type="text" id="item-name" placeholder="ì˜ˆ: ì–‘íŒŒ"></p>
                <p>ìˆ˜ëŸ‰: <input type="text" id="item-quantity" placeholder="ì˜ˆ: 1/2ê°œ"></p>
                <button onclick="addItemToList()">ì¬ë£Œ ëª©ë¡ì— ì¶”ê°€</button>
                <p style="margin-top:15px;">ì¶”ê°€í•  ì¬ë£Œ ëª©ë¡: <strong id="current-items-count">0ê°œ</strong></p>
                <button onclick="simulateRegister()">ë“±ë¡ ì‹œì—°</button>
            </div>
            
            <hr style="margin: 20px 0;">
            <button onclick="simulateFetchItems()">ë“±ë¡ëœ ì¬ë£Œ ëª©ë¡ ì¡°íšŒ</button>
            <div id="fridge-response-container"></div>
        </div>
        
        <div class="section">
            <h2>2. ğŸ‘¤ ê°œì¸ í”„ë¡œí•„ ì„¤ì • ë° ê´€ë¦¬</h2>
            <div class="select-group">
                <label>ì•Œë ˆë¥´ê¸° ì •ë³´:</label>
                <select id="allergy-select" onchange="toggleAllergyInput(this.value)">
                    <option value="NO">ì—†ìŒ (NO)</option>
                    <option value="YES">ìˆìŒ (YES) - ì…ë ¥ í•„ìš”</option>
                </select>
                <div id="allergy-input-section">
                    <input type="text" id="profile-allergies" placeholder="ì•Œë ˆë¥´ê¸° ì…ë ¥ (ì˜ˆ: ë•…ì½©, ê°‘ê°ë¥˜)">
                </div>
            </div>
            <div class="select-group">
                <label>ë³´ìœ  ì¡°ë¦¬ ë„êµ¬ (PRD í•­ëª©):</label>
                <div>
                    <input type="checkbox" id="tool-airfryer" value="ì—ì–´í”„ë¼ì´ì–´" checked><label for="tool-airfryer">ì—ì–´í”„ë¼ì´ì–´</label><br>
                    <input type="checkbox" id="tool-microwave" value="ì „ìë ˆì¸ì§€"><label for="tool-microwave">ì „ìë ˆì¸ì§€</label><br>
                    <input type="checkbox" id="tool-induction" value="ì¸ë•ì…˜"><label for="tool-induction">ì¸ë•ì…˜</label>
                </div>
            </div>
            <div class="select-group">
                <label>ê°œì¸ ëª©í‘œ (PRD í•­ëª©):</label>
                <select id="profile-goals">
                    <option value="ë‹¤ì´ì–´íŠ¸">ë‹¤ì´ì–´íŠ¸</option>
                    <option value="ë¹„ê±´">ë¹„ê±´</option>
                    <option value="ì €ì—¼ì‹">ì €ì—¼ì‹</option>
                    <option value="ì ˆì•½">ì‹ë¹„ ì ˆì•½</option>
                </select>
            </div>

            <button onclick="simulateSaveProfile()">í”„ë¡œí•„ ì €ì¥ ì‹œì—°</button>
            <button onclick="simulateLoadProfile()">í”„ë¡œí•„ ì¡°íšŒ ì‹œì—°</button>
            <div id="profile-response-container"></div>
        </div>

        <div class="section">
            <h2>3. ğŸ§‘â€ğŸ³ AI ì…°í”„: ë§ì¶¤ ë ˆì‹œí”¼ ìƒì„±</h2>
            <p>ìš”ì²­ ëª©ì : <input type="text" id="meal-type" value="ë‚¨ì€ ì¬ë£Œë¥¼ ì´ìš©í•œ ê°„ë‹¨í•œ ì €ë… ì‹ì‚¬"></p>
            <button onclick="simulateRequestRecipe()">ë ˆì‹œí”¼ ìƒì„± ì‹œì—° (AI ìš”ì²­)</button>
            <div id="recipe-output-container">
                </div>
        </div>

        <div class="section">
            <h2>4. ğŸ¤– AI ì¿ í‚¹ ì–´ì‹œìŠ¤í„´íŠ¸: ì‹¤ì‹œê°„ ì¡°ë¦¬ ì§€ì›</h2>
            <div class="chat-log" id="chat-log">
                <p style="text-align: center; color: #666;">--- ëŒ€í™” ì‹œì‘ ---</p>
            </div>
            <p>ì§ˆë¬¸: <input type="text" id="chat-message" placeholder="ì˜ˆ: ê°„ì´ ë„ˆë¬´ ì§œìš”. A ì¬ë£Œ ëŒ€ì‹  B ì¬ë£Œ ì¨ë„ ë ê¹Œìš”?"></p>
            <button onclick="simulateSendChatMessage()">ì±—ë´‡ì—ê²Œ ì§ˆë¬¸ ì‹œì—°</button>
        </div>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/uuid/8.3.2/uuid.min.js"></script>
    <script>
        let CURRENT_USER_ID = null;
        let itemsToRegister = []; 
        let MOCKED_FRIDGE_DATA = {}; 
        let MOCKED_PROFILE_DATA = {}; 
        let MOCKED_CHAT_HISTORY = []; // ì±—ë´‡ íˆìŠ¤í† ë¦¬ ì‹œë®¬ë ˆì´ì…˜

        // -----------------------------------------------------
        // UI/UX ë° ì´ˆê¸°í™”
        // -----------------------------------------------------
        function toggleAllergyInput(value) {
            document.getElementById('allergy-input-section').style.display = value === 'YES' ? 'block' : 'none';
        }

        function showManualInput() {
            document.getElementById('manual-input-section').style.display = 'block';
        }

        function simulateRegisterMode(mode) {
            showManualInput(); // ì…ë ¥ UI ë³´ì—¬ì£¼ê¸°
            let modeText = '';
            if (mode === 'photo') modeText = 'ëƒ‰ì¥ê³  ì¬ë£Œ ì´¬ì˜ (AI Vision)';
            else if (mode === 'receipt') modeText = 'ì˜ìˆ˜ì¦ ë‚´ìš© ìŠ¤ìº” (AI OCR)';
            
            alert(`${modeText} í™”ë©´ìœ¼ë¡œ ì´ë™í–ˆìŠµë‹ˆë‹¤. (ì‹œë®¬ë ˆì´ì…˜)\n\ní•˜ë‹¨ì˜ ì…ë ¥ë€ì„ ì‚¬ìš©í•´ ë°ì´í„°ë¥¼ ì¤€ë¹„í•´ì£¼ì„¸ìš”.`);
        }
        
        function initializeUserId() {
            let userId = localStorage.getItem('fridge_chef_user_id');
            if (!userId) {
                userId = uuid.v4(); 
                localStorage.setItem('fridge_chef_user_id', userId);
            }
            CURRENT_USER_ID = userId;
            document.getElementById('user-id-display').innerText = userId;
            toggleAllergyInput('NO');
            if (!MOCKED_FRIDGE_DATA[CURRENT_USER_ID]) MOCKED_FRIDGE_DATA[CURRENT_USER_ID] = [];
            if (!MOCKED_PROFILE_DATA[CURRENT_USER_ID]) MOCKED_PROFILE_DATA[CURRENT_USER_ID] = { preferences: ["ê°„ë‹¨í•œ ìš”ë¦¬"] };
        }

        function displayData(data, containerId, isRecipe = false) {
            const container = document.getElementById(containerId);
            container.innerHTML = ''; // ê¸°ì¡´ ë‚´ìš© ì‚­ì œ

            if (isRecipe) {
                // ë ˆì‹œí”¼ UI ë Œë”ë§
                renderRecipeUI(data.recipe);
            } else if (data.items) {
                // ì¬ë£Œ ëª©ë¡ UI ë Œë”ë§
                const ul = document.createElement('ul');
                data.items.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = `${item.item_name} (${item.quantity}) - ë“±ë¡ì¼: ${item.registered_at.substring(0, 10)}`;
                    ul.appendChild(li);
                });
                container.appendChild(document.createElement('p')).textContent = `ì´ ${data.items.length}ê°œ í•­ëª© ì¡°íšŒ ì™„ë£Œ.`;
                container.appendChild(ul);
            } else if (data.profile) {
                // í”„ë¡œí•„ UI ë Œë”ë§
                const p = document.createElement('p');
                p.innerHTML = `<strong>ëª©í‘œ:</strong> ${data.profile.dietary_goals}<br>
                               <strong>ë„êµ¬:</strong> ${data.profile.equipments.join(', ')}<br>
                               <strong>ì•Œë ˆë¥´ê¸°:</strong> ${data.profile.allergies || 'ì—†ìŒ'}`;
                container.appendChild(p);
            } else {
                 // ì¼ë°˜ ë©”ì‹œì§€ ë˜ëŠ” ì˜¤ë¥˜ ì¶œë ¥
                container.textContent = JSON.stringify(data, null, 2);
            }
        }
        
        // -----------------------------------------------------
        // ë ˆì‹œí”¼ UI ë Œë”ë§ (PRD ë°˜ì˜)
        // -----------------------------------------------------
        function renderRecipeUI(recipeData) {
            const container = document.getElementById('recipe-output-container');
            
            const ingredientsHTML = recipeData.ingredients.map(ing => `
                <li>
                    ${ing.name} (${ing.quantity})
                    <span style="color:${ing.is_owned ? '#28a745' : '#dc3545'}; font-weight:bold;">
                        [${ing.is_owned ? 'ë³´ìœ ' : 'ë¶€ì¡±'}]
                    </span>
                </li>
            `).join('');

            const stepsHTML = recipeData.steps.map(step => `
                <li><strong>Step ${step.step_number}:</strong> ${step.instruction}</li>
            `).join('');

            container.innerHTML = `
                <div class="recipe-card">
                    <h3>${recipeData.title}</h3>
                    <div class="recipe-meta">
                        <span class="utilization-rate">ì¬ë£Œ ì†Œì§„ìœ¨: ${recipeData.material_utilization_rate}%</span>
                        <span>ë¶„ëŸ‰: ${recipeData.serving_size}</span>
                        <span>ë‚œì´ë„: ${recipeData.difficulty}</span>
                        <span>ì¡°ë¦¬ì‹œê°„: ${recipeData.prep_time_min + recipeData.cook_time_min}ë¶„</span>
                    </div>

                    <div class="recipe-ingredients">
                        <h4>í•„ìš” ì¬ë£Œ</h4>
                        <ul>${ingredientsHTML}</ul>
                    </div>

                    <div class="recipe-steps">
                        <h4>ì¡°ë¦¬ ìˆœì„œ (ë‹¨ê³„ë³„ ê°€ì´ë“œ)</h4>
                        <ol>${stepsHTML}</ol>
                        <button style="margin-top: 15px; background-color: #ff9900; float: right;" onclick="alert('ìš”ë¦¬ ì‹œì‘ ë²„íŠ¼ í´ë¦­ë¨. AI ì–´ì‹œìŠ¤í„´íŠ¸ê°€ í™œì„±í™”ë©ë‹ˆë‹¤.')">ìš”ë¦¬ ì‹œì‘</button>
                    </div>
                </div>
            `;
        }

        // -----------------------------------------------------
        // 1. ì¬ë£Œ ë“±ë¡ ë° ì¡°íšŒ ì‹œë®¬ë ˆì´ì…˜
        // -----------------------------------------------------
        function addItemToList() {
            const name = document.getElementById('item-name').value;
            const quantity = document.getElementById('item-quantity').value;
            if (!name) return alert('ì¬ë£Œëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            itemsToRegister.push({ name, quantity });
            document.getElementById('current-items-count').innerText = itemsToRegister.length + "ê°œ";
            document.getElementById('item-name').value = '';
            document.getElementById('item-quantity').value = '';
        }

        function simulateRegister() {
            if (itemsToRegister.length === 0) return alert('ë“±ë¡í•  ì¬ë£Œë¥¼ ë¨¼ì € ì¶”ê°€í•´ì£¼ì„¸ìš”.');
            const newItems = itemsToRegister.map(item => ({
                ...item, id: uuid.v4(), registered_at: new Date().toISOString()
            }));
            if (!MOCKED_FRIDGE_DATA[CURRENT_USER_ID]) MOCKED_FRIDGE_DATA[CURRENT_USER_ID] = [];
            MOCKED_FRIDGE_DATA[CURRENT_USER_ID].push(...newItems);
            displayData({ message: `ì„±ê³µì ìœ¼ë¡œ ${newItems.length}ê°œì˜ ì¬ë£Œê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.` }, 'fridge-response-container');
            itemsToRegister = [];
            document.getElementById('current-items-count').innerText = "0ê°œ";
        }

        function simulateFetchItems() {
            const items = MOCKED_FRIDGE_DATA[CURRENT_USER_ID] || [];
            displayData({ items: items }, 'fridge-response-container');
        }

        // -----------------------------------------------------
        // 2. í”„ë¡œí•„ ì„¤ì • ë° ì¡°íšŒ ì‹œë®¬ë ˆì´ì…˜
        // -----------------------------------------------------
        function simulateSaveProfile() {
            const checkedTools = Array.from(document.querySelectorAll('.select-group input[type="checkbox"]:checked')).map(cb => cb.value);
            const allergySelect = document.getElementById('allergy-select').value;
            let allergies = allergySelect === 'YES' ? document.getElementById('profile-allergies').value : '';
            
            const profileData = {
                preferences: ["ê°„ë‹¨í•œ ìš”ë¦¬", "í•œì‹"], 
                dislikes: ["ê³ ìˆ˜", "ê°€ì§€"],
                allergies: allergies,
                equipments: checkedTools,
                dietary_goals: document.getElementById('profile-goals').value
            };
            MOCKED_PROFILE_DATA[CURRENT_USER_ID] = profileData;
            displayData({ profile: profileData }, 'profile-response-container');
        }

        function simulateLoadProfile() {
            const profile = MOCKED_PROFILE_DATA[CURRENT_USER_ID] || {};
            displayData({ profile: profile }, 'profile-response-container');
        }

        // -----------------------------------------------------
        // 3. AI ì…°í”„ ìš”ì²­ ì‹œë®¬ë ˆì´ì…˜ (AI ìƒì„± ê²°ê³¼ í‘œì‹œ)
        // -----------------------------------------------------
        function simulateRequestRecipe() {
            // Mock ë ˆì‹œí”¼ ë°ì´í„° (Geminiê°€ ë°˜í™˜í•  ê²ƒìœ¼ë¡œ ì˜ˆìƒë˜ëŠ” êµ¬ì¡°)
            const mockRecipe = {
                "title": "ë‚¨ì€ ì‚¼ê²¹ì‚´ê³¼ ê¹€ì¹˜ë¥¼ í™œìš©í•œ ì´ˆê°„ë‹¨ ë³¶ìŒë°¥",
                "serving_size": "1ì¸ë¶„",
                "prep_time_min": 5,
                "cook_time_min": 10,
                "difficulty": "ì´ˆê¸‰",
                "material_utilization_rate": 85.7, 
                "ingredients": [
                    {"name": "ì°¬ë°¥", "quantity": "1ê³µê¸°", "is_owned": true},
                    {"name": "ì‚¼ê²¹ì‚´ (ë‚¨ì€ ê²ƒ)", "quantity": "50g", "is_owned": true},
                    {"name": "ì‹ ê¹€ì¹˜", "quantity": "50g", "is_owned": true},
                    {"name": "ê³„ë€", "quantity": "1ê°œ", "is_owned": false} // ë¶€ì¡± ì¬ë£Œ ì‹œë®¬ë ˆì´ì…˜
                ],
                "steps": [
                    {"step_number": 1, "instruction": "ë³´ìœ  ì¡°ë¦¬ë„êµ¬(ì—ì–´í”„ë¼ì´ì–´)ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  í”„ë¼ì´íŒ¬ì— ì‚¼ê²¹ì‚´ê³¼ ê¹€ì¹˜ë¥¼ ë³¶ìŠµë‹ˆë‹¤."},
                    {"step_number": 2, "instruction": "ì°¬ë°¥ì„ ë„£ê³  ë°¥ì•Œì´ ë­‰ê°œì§€ì§€ ì•Šë„ë¡ ë¹ ë¥´ê²Œ ë³¶ìŠµë‹ˆë‹¤."},
                    {"step_number": 3, "instruction": "ì ‘ì‹œì— ë‹´ê³  ì°¸ê¸°ë¦„ì„ ì‚´ì§ ë¿Œë ¤ ë§ˆë¬´ë¦¬í•©ë‹ˆë‹¤. (ìš”ë¦¬ ì¤‘ ì±—ë´‡ í™œì„±í™”)"}
                ]
            };
            
            // UI ë Œë”ë§ í•¨ìˆ˜ í˜¸ì¶œ
            displayData({ message: "AI ë ˆì‹œí”¼ ìƒì„± ì„±ê³µ", recipe: mockRecipe }, 'recipe-output-container', true);
        }

        // -----------------------------------------------------
        // 4. AI ì¿ í‚¹ ì–´ì‹œìŠ¤í„´íŠ¸ ì‹œë®¬ë ˆì´ì…˜
        // -----------------------------------------------------
        function appendChatMessage(sender, message) {
            const log = document.getElementById('chat-log');
            const p = document.createElement('p');
            p.className = sender === 'user' ? 'chat-user' : 'chat-ai';
            p.textContent = sender === 'user' ? `ë‚˜: ${message}` : `AI ì…°í”„: ${message}`;
            log.appendChild(p);
            log.scrollTop = log.scrollHeight; // ìŠ¤í¬ë¡¤ í•˜ë‹¨ìœ¼ë¡œ ì´ë™
        }

        function simulateSendChatMessage() {
            const message = document.getElementById('chat-message').value;
            if (!message) return alert('ì§ˆë¬¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');

            appendChatMessage('user', message); // ì‚¬ìš©ì ì§ˆë¬¸ ë¡œê·¸

            // ì±—ë´‡ ì‘ë‹µ ì‹œë®¬ë ˆì´ì…˜ (ì»¨í…ìŠ¤íŠ¸ ê¸°ë°˜)
            let responseText = "";
            let contextMessage = MOCKED_CHAT_HISTORY.length > 0 ? "ì´ì „ ëŒ€í™” ë‚´ìš©ì„ ì°¸ê³ í–ˆìŠµë‹ˆë‹¤. " : "";

            if (message.includes("ì§œìš”")) {
                responseText = `${contextMessage}ê°„ì´ ì§œë‹¤ë©´, ë¬¼ì´ë‚˜ ìœ¡ìˆ˜ë¥¼ ì¡°ê¸ˆ ë” ë„£ì–´ ë†ë„ë¥¼ ë¬½ê²Œ ë§Œë“œì„¸ìš”. (í˜„ì¬ 3ë‹¨ê³„ ì¡°ë¦¬ ì¤‘ì´ë¼ê³  ê°€ì •)`;
            } else if (message.includes("ëŒ€ì‹ ")) {
                responseText = `${contextMessage}ê°€ì§€ê³  ê³„ì‹  ì¬ë£Œ ëª©ë¡ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤. ì–‘íŒŒ ëŒ€ì‹  ëŒ€íŒŒë¥¼ ì‚¬ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§›ì˜ ë³€í™”ëŠ” ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
            } else {
                responseText = `${contextMessage}ë„¤, ìš”ë¦¬ ì¤‘ ë°œìƒí•˜ëŠ” ëŒë°œ ìƒí™©ì— ëŒ€í•´ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¡°ì–¸í•´ ë“œë¦½ë‹ˆë‹¤. ì§ˆë¬¸í•´ì£¼ì„¸ìš”.`;
            }
            
            // ëŒ€í™” ê¸°ë¡ ì‹œë®¬ë ˆì´ì…˜ ì €ì¥
            MOCKED_CHAT_HISTORY.push({ sender: 'user', message: message });
            MOCKED_CHAT_HISTORY.push({ sender: 'ai', message: responseText });

            setTimeout(() => {
                appendChatMessage('ai', responseText);
                document.getElementById('chat-message').value = '';
            }, 500);
        }


        // í˜ì´ì§€ ë¡œë“œ ì‹œ ID ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', initializeUserId);
    </script>
</body>
</html>
