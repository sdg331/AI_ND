<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>FridgeChef ë°ëª¨</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg-main: #fff7e6;
      --bg-main-2: #ffe8d0;
      --bg-main-3: #fff3bf;
      --amber: #fbbf24;
      --amber-deep: #f97316;
      --green: #10b981;
      --green-deep: #059669;
      --text-main: #1f2933;
    }
    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Noto Sans KR", sans-serif;
      background: linear-gradient(135deg, var(--bg-main), var(--bg-main-2), var(--bg-main-3));
      color: var(--text-main);
      padding-bottom: 80px; /* í•˜ë‹¨ íƒ­ë°” ë†’ì´ */
    }
    .page { min-height: 100vh; }

    /* í† ìŠ¤íŠ¸ */
    .toast {
      position: fixed;
      top: 1.3rem;
      left: 50%;
      transform: translateX(-50%);
      padding: 0.7rem 1.3rem;
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 600;
      color: #fff;
      display: none;
      z-index: 50;
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
      backdrop-filter: blur(8px);
    }
    .toast.success { background: var(--green); }
    .toast.error { background: #f97373; }
    .toast.info { background: #f59e0b; }

    /* ìƒë‹¨ í—¤ë” */
    .header {
      background: #fff;
      border-bottom: 1px solid #fde68a;
      box-shadow: 0 4px 12px rgba(0,0,0,0.04);
      position: sticky;
      top: 0;
      z-index: 20;
    }
    .header-inner {
      max-width: 900px;
      margin: 0 auto;
      padding: 0.9rem 1.25rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
    }
    .header-left {
      display: flex;
      gap: 0.75rem;
      align-items: center;
    }
    .avatar {
      width: 42px;
      height: 42px;
      border-radius: 1rem;
      background: linear-gradient(135deg, var(--amber), var(--amber-deep));
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 1.2rem;
      box-shadow: 0 6px 18px rgba(249,115,22,0.45);
    }
    .header-title {
      font-size: 1.15rem;
      font-weight: 800;
      display: flex;
      align-items: center;
      gap: 0.3rem;
    }
    .header-sub {
      font-size: 0.8rem;
      color: #6b7280;
      font-weight: 500;
    }
    .btn-outline {
      border: none;
      border-radius: 999px;
      cursor: pointer;
      font-size: 0.8rem;
      padding: 0.4rem 0.9rem;
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      font-weight: 600;
      background: #fff;
      border: 1px solid #fcd34d;
      color: #374151;
      transition: all 0.15s;
    }
    .btn-outline:hover { background: #fef3c7; }

    /* ì»¨í…ì¸  ê³µí†µ */
    .content {
      max-width: 900px;
      margin: 0 auto;
      padding: 1rem 1.25rem 2rem;
    }

    /* ì¹´ë“œ ê³µí†µ */
    .card {
      border-radius: 1.5rem;
      background: #fff;
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
      margin-bottom: 1.2rem;
      overflow: hidden;
      border: none;
    }
    .card-header {
      padding: 0.8rem 1.3rem;
      color: #fff;
      display: flex;
      align-items: center;
      gap: 0.6rem;
    }
    .card-header-icon {
      background: rgba(255,255,255,0.25);
      padding: 0.45rem;
      border-radius: 0.9rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    .card-title {
      font-size: 0.95rem;
      font-weight: 700;
    }
    .card-body {
      padding: 1.2rem 1.3rem 1.4rem;
    }
    .label {
      display: block;
      font-size: 0.8rem;
      font-weight: 600;
      color: #374151;
      margin-bottom: 0.3rem;
    }

    textarea {
      width: 100%;
      resize: none;
      min-height: 90px;
      border-radius: 0.9rem;
      border: 1px solid #fde68a;
      padding: 0.6rem 0.75rem;
      font-size: 0.85rem;
      font-family: inherit;
      outline: none;
      transition: all 0.15s;
      background: #fffbeb;
    }
    textarea:focus {
      border-color: var(--amber);
      box-shadow: 0 0 0 2px rgba(250,204,21,0.25);
    }
    textarea[disabled] {
      background: #f9fafb;
      color: #9ca3af;
    }

    .skill-buttons {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 0.5rem;
    }
    .skill-btn {
      border-radius: 0.9rem;
      padding: 0.6rem 0.4rem;
      font-size: 0.8rem;
      font-weight: 600;
      border: 2px solid #fde68a;
      background: #fffbeb;
      cursor: pointer;
      transition: all 0.15s;
      text-align: center;
    }
    .skill-btn.active {
      background: linear-gradient(135deg, var(--amber), var(--amber-deep));
      color: #fff;
      border-color: transparent;
      box-shadow: 0 8px 20px rgba(248,113,22,0.4);
      transform: scale(1.03);
    }
    .skill-btn.disabled {
      opacity: 0.6;
      cursor: default;
    }

    .pref-section { margin-bottom: 1.4rem; }
    .pref-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.35rem;
      min-height: 1.5rem;
      align-items: flex-start;
      margin-bottom: 0.4rem;
    }
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.2rem 0.55rem;
      font-size: 0.78rem;
      border-radius: 999px;
      background: #fef3c7;
      color: #92400e;
    }
    .badge button {
      border: none;
      background: none;
      padding: 0;
      cursor: pointer;
      font-size: 0.78rem;
    }

    .pref-input-row {
      display: flex;
      gap: 0.35rem;
      margin-top: 0.3rem;
    }
    .pref-input-row input {
      flex: 1;
      padding: 0.45rem 0.6rem;
      border-radius: 0.8rem;
      border: 1px solid #fde68a;
      font-size: 0.8rem;
      background: #fffdf3;
      outline: none;
    }
    .pref-input-row input:focus {
      border-color: var(--amber);
      box-shadow: 0 0 0 2px rgba(250,204,21,0.2);
    }
    .pref-input-row button {
      min-width: 2.3rem;
      border-radius: 0.9rem;
      border: none;
      background: var(--amber);
      color: #fff;
      font-weight: 700;
      cursor: pointer;
    }
    .pref-input-row button:disabled {
      opacity: 0.5;
      cursor: default;
    }

    /* ëƒ‰ì¥ê³  í™”ë©´ìš© */
    .add-row {
      display: flex;
      gap: 0.4rem;
      margin-top: 0.3rem;
    }
    .add-row input {
      flex: 1;
      padding: 0.45rem 0.6rem;
      border-radius: 0.8rem;
      border: 1px solid #fde68a;
      font-size: 0.8rem;
      background: #fffdf3;
      outline: none;
    }
    .add-row input:focus {
      border-color: var(--amber);
      box-shadow: 0 0 0 2px rgba(250,204,21,0.2);
    }
    .add-row button {
      min-width: 2.3rem;
      border-radius: 0.9rem;
      border: none;
      background: var(--amber);
      color: #fff;
      font-weight: 700;
      cursor: pointer;
    }
    .ingredient-list {
      list-style: none;
      padding-left: 0;
      margin: 0;
    }
    .ingredient-item {
      background: #fff7ed;
      border-radius: 1rem;
      padding: 0.6rem 0.8rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.4rem;
      font-size: 0.8rem;
    }

    /* ë ˆì‹œí”¼ ì¹´ë“œ */
    .recipe-main {
      text-align: center;
      padding: 1.1rem 0;
    }
    .recipe-emoji {
      font-size: 3rem;
      margin-bottom: 0.5rem;
    }
    .recipe-btn {
      border: none;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--green), var(--green-deep));
      color: #fff;
      padding: 0.7rem 1.5rem;
      font-size: 0.9rem;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 8px 22px rgba(34,197,94,0.4);
    }

    /* í•˜ë‹¨ íƒ­ë°” */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: #fff;
      border-top: 1px solid #e5e7eb;
      box-shadow: 0 -8px 20px rgba(0,0,0,0.06);
      z-index: 30;
    }
    .bottom-nav-inner {
      max-width: 900px;
      margin: 0 auto;
      display: flex;
    }
    .nav-item {
      flex: 1;
      padding: 0.3rem 0.2rem 0.45rem;
      text-align: center;
      font-size: 0.7rem;
      color: #9ca3af;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 0.15rem;
      transition: all 0.15s;
    }
    .nav-item span.icon { font-size: 1.4rem; }
    .nav-item.active {
      color: var(--amber-deep);
      font-weight: 700;
    }

    /* í™”ë©´ íŒ¨ë„ */
    .screen { display: none; }
    .screen.active { display: block; }

    .btn-edit-save {
      border: none;
      border-radius: 999px;
      cursor: pointer;
      font-size: 0.8rem;
      padding: 0.45rem 0.9rem;
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--amber), var(--amber-deep));
      color: #fff;
      box-shadow: 0 8px 20px rgba(248,113,22,0.4);
    }

    @media (max-width:640px) {
      .header-inner,.content {
        padding-left: 1rem;
        padding-right: 1rem;
      }
    }
  </style>
</head>
<body>
<div class="page">

  <!-- í† ìŠ¤íŠ¸ -->
  <div id="toast" class="toast"></div>

  <!-- ìƒë‹¨ í—¤ë” -->
  <header class="header">
    <div class="header-inner">
      <div class="header-left">
        <div class="avatar">ğŸ³</div>
        <div>
          <div class="header-title">FridgeChef</div>
          <div class="header-sub">ë‚´ ëƒ‰ì¥ê³  ì† AI ì…°í”„</div>
        </div>
      </div>
      <button class="btn-outline" type="button" onclick="logoutDemo()">
        ğŸšª ë¡œê·¸ì•„ì›ƒ
      </button>
    </div>
  </header>

  <!-- ë©”ì¸ ì»¨í…ì¸  -->
  <main class="content">
    <!-- ëƒ‰ì¥ê³  í™”ë©´ -->
    <section id="screen-fridge" class="screen active">
      <section class="card">
        <div class="card-header" style="background:linear-gradient(135deg,#f97316,#fb923c);">
          <div class="card-header-icon">ğŸ§Š</div>
          <div class="card-title">ë‚˜ì˜ ëƒ‰ì¥ê³ </div>
        </div>
        <div class="card-body">
          <p style="font-size:0.85rem;color:#6b7280;margin:0 0 0.6rem;">
            ëƒ‰ì¥ê³  ì† ì¬ë£Œë¥¼ ë“±ë¡í•´ë‘ë©´, AI ì…°í”„ê°€ ë§ì¶¤ ë ˆì‹œí”¼ë¥¼ ì¶”ì²œí•´ì¤˜ìš”. (ë°ëª¨)
          </p>
          <label class="label">â• ì¬ë£Œ ì§ì ‘ ì¶”ê°€</label>
          <div class="add-row">
            <input id="ing-name" placeholder="ì¬ë£Œëª… (ì˜ˆ: ì–‘íŒŒ)" />
            <input id="ing-qty" placeholder="ìˆ˜ëŸ‰ (ì˜ˆ: 2ê°œ)" />
            <button type="button" onclick="addIngredient()">+</button>
          </div>
        </div>
      </section>

      <section class="card">
        <div class="card-header" style="background:linear-gradient(135deg,#facc15,#f97316);">
          <div class="card-header-icon">ğŸ¥•</div>
          <div class="card-title">ì¬ë£Œ ëª©ë¡ (ë¡œì»¬ ë°ëª¨)</div>
        </div>
        <div class="card-body">
          <ul id="ingredient-list" class="ingredient-list"></ul>
          <p id="empty-ing" style="font-size:0.8rem;color:#9ca3af;margin:0.4rem 0 0;">ì•„ì§ ë“±ë¡ëœ ì¬ë£Œê°€ ì—†ì–´ìš”.</p>
        </div>
      </section>
    </section>

    <!-- AI ì…°í”„ í™”ë©´ -->
    <section id="screen-recipe" class="screen">
      <section class="card">
        <div class="card-header" style="background:linear-gradient(135deg,#22c55e,#16a34a);">
          <div class="card-header-icon">ğŸ‘¨â€ğŸ³</div>
          <div class="card-title">AI ì…°í”„ ì¶”ì²œ</div>
        </div>
        <div class="card-body">
          <div class="recipe-main">
            <div class="recipe-emoji">âœ¨</div>
            <p style="font-size:0.9rem;color:#4b5563;margin-bottom:0.8rem;">
              ì§€ê¸ˆ ê°€ì§€ê³  ìˆëŠ” ì¬ë£Œë¥¼ ê¸°ë°˜ìœ¼ë¡œ, AI ì…°í”„ê°€ ì˜¤ëŠ˜ì˜ ë©”ë‰´ë¥¼ ì¶”ì²œí•´ ë“œë¦½ë‹ˆë‹¤. (ë°ëª¨)
            </p>
            <button class="recipe-btn" type="button" onclick="showDemoRecipe()">ë ˆì‹œí”¼ ì¶”ì²œë°›ê¸°</button>
          </div>
          <div id="recipe-result" style="margin-top:1rem;display:none;">
            <h3 id="recipe-title" style="font-size:1rem;font-weight:700;color:#16a34a;margin:0 0 0.5rem;"></h3>
            <p style="font-size:0.85rem;margin:0.2rem 0;">
              <strong>ğŸ›’ ì¬ë£Œ:</strong> <span id="recipe-materials"></span>
            </p>
            <div id="recipe-steps" style="margin-top:0.6rem;font-size:0.85rem;"></div>
            <p id="recipe-tip" style="margin-top:0.6rem;font-size:0.8rem;color:#6b7280;background:#ecfdf3;border-radius:0.7rem;padding:0.45rem 0.6rem;"></p>
          </div>
        </div>
      </section>
    </section>

    <!-- í”„ë¡œí•„ í™”ë©´ -->
    <section id="screen-profile" class="screen">
      <div style="display:flex;justify-content:flex-end;margin-bottom:0.6rem;">
        <button id="editSaveBtn" class="btn-edit-save" type="button" onclick="toggleEdit()">
          âš™ï¸ ìˆ˜ì •í•˜ê¸°
        </button>
      </div>

      <!-- ê¸°ë³¸ ì •ë³´ -->
      <section class="card">
        <div class="card-header" style="background:linear-gradient(135deg,#fbbf24,#f97316);">
          <div class="card-header-icon">âš™ï¸</div>
          <div class="card-title">ê¸°ë³¸ ì •ë³´</div>
        </div>
        <div class="card-body">
          <div style="margin-bottom:1rem;">
            <label class="label">ğŸ¯ ìš”ë¦¬ ëª©í‘œ</label>
            <textarea id="goalInput" disabled>ì£¼ 3íšŒ ì§ì ‘ ìš”ë¦¬í•˜ê¸°</textarea>
          </div>
          <div>
            <label class="label">ğŸ‘¨â€ğŸ³ ìš”ë¦¬ ì‹¤ë ¥</label>
            <div class="skill-buttons">
              <button type="button" class="skill-btn active" data-level="ì´ˆë³´" onclick="setSkill('ì´ˆë³´')">ì´ˆë³´</button>
              <button type="button" class="skill-btn" data-level="ì¤‘ê¸‰" onclick="setSkill('ì¤‘ê¸‰')">ì¤‘ê¸‰</button>
              <button type="button" class="skill-btn" data-level="ê³ ê¸‰" onclick="setSkill('ê³ ê¸‰')">ê³ ê¸‰</button>
            </div>
          </div>
        </div>
      </section>

      <!-- ì·¨í–¥/ì•Œë ˆë¥´ê¸°/ë„êµ¬ -->
      <section class="card">
        <div class="card-header" style="background:linear-gradient(135deg,#ec4899,#fb7185);">
          <div class="card-header-icon">â¤ï¸</div>
          <div class="card-title">ì·¨í–¥ & ê±´ê°•</div>
        </div>
        <div class="card-body">
          <div class="pref-section">
            <label class="label">ğŸ’š ì¢‹ì•„í•˜ëŠ” ì¬ë£Œ</label>
            <div id="favTags" class="pref-tags"></div>
            <div class="pref-input-row">
              <input id="favInput" type="text" placeholder="ì˜ˆ: ì—°ì–´, ì•„ë³´ì¹´ë„, í† ë§ˆí† " disabled
                     onkeypress="onEnter(event, 'favorite')">
              <button id="favBtn" type="button" onclick="addTag('favorite')" disabled>+</button>
            </div>
          </div>
          <div class="pref-section">
            <label class="label">âŒ ì‹«ì–´í•˜ëŠ” ì¬ë£Œ</label>
            <div id="dislikeTags" class="pref-tags"></div>
            <div class="pref-input-row">
              <input id="dislikeInput" type="text" placeholder="ì˜ˆ: ì˜¤ì´, ê³ ìˆ˜" disabled
                     onkeypress="onEnter(event, 'dislike')">
              <button id="dislikeBtn" type="button" onclick="addTag('dislike')" disabled>+</button>
            </div>
          </div>
          <div class="pref-section">
            <label class="label">âš ï¸ ì•Œë ˆë¥´ê¸°</label>
            <div id="allergyTags" class="pref-tags"></div>
            <div class="pref-input-row">
              <input id="allergyInput" type="text" placeholder="ì˜ˆ: ë•…ì½©, ê°‘ê°ë¥˜" disabled
                     onkeypress="onEnter(event, 'allergy')">
              <button id="allergyBtn" type="button" onclick="addTag('allergy')" disabled>+</button>
            </div>
          </div>
          <div class="pref-section">
            <label class="label">ğŸ¥— ì‹ë‹¨ ì œí•œ</label>
            <div id="dietTags" class="pref-tags"></div>
            <div class="pref-input-row">
              <input id="dietInput" type="text" placeholder="ì˜ˆ: ë¹„ê±´, ì €ì—¼ì‹" disabled
                     onkeypress="onEnter(event, 'diet')">
              <button id="dietBtn" type="button" onclick="addTag('diet')" disabled>+</button>
            </div>
          </div>
          <div class="pref-section">
            <label class="label">ğŸ”ª ë³´ìœ  ì¡°ë¦¬ ë„êµ¬</label>
            <div id="toolTags" class="pref-tags"></div>
            <div class="pref-input-row">
              <input id="toolInput" type="text" placeholder="ì˜ˆ: ì—ì–´í”„ë¼ì´ì–´, ë¯¹ì„œê¸°" disabled
                     onkeypress="onEnter(event, 'tool')">
              <button id="toolBtn" type="button" onclick="addTag('tool')" disabled>+</button>
            </div>
          </div>
        </div>
      </section>
    </section>
  </main>

  <!-- í•˜ë‹¨ íƒ­ë°” -->
  <nav class="bottom-nav">
    <div class="bottom-nav-inner">
      <div class="nav-item active" data-target="fridge" onclick="switchScreen('fridge')">
        <span class="icon">ğŸ§Š</span>
        <span>ëƒ‰ì¥ê³ </span>
      </div>
      <div class="nav-item" data-target="recipe" onclick="switchScreen('recipe')">
        <span class="icon">ğŸ‘¨â€ğŸ³</span>
        <span>AI ì…°í”„</span>
      </div>
      <div class="nav-item" data-target="profile" onclick="switchScreen('profile')">
        <span class="icon">ğŸ‘¤</span>
        <span>í”„ë¡œí•„</span>
      </div>
    </div>
  </nav>
</div>

<script>
  // í† ìŠ¤íŠ¸
  function showToast(type, message) {
    const toast = document.getElementById('toast');
    toast.className = 'toast ' + type;
    toast.textContent = message;
    toast.style.display = 'block';
    setTimeout(() => { toast.style.display = 'none'; }, 2200);
  }

  function logoutDemo() {
    if (confirm('ì •ë§ ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (ë°ëª¨)')) {
      showToast('success', 'ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤ (ë°ëª¨)');
    }
  }

  // í•˜ë‹¨ íƒ­ í™”ë©´ ì „í™˜
  function switchScreen(name) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById('screen-' + name).classList.add('active');
    document.querySelectorAll('.nav-item').forEach(n => {
      n.classList.toggle('active', n.getAttribute('data-target') === name);
    });
  }

  // ëƒ‰ì¥ê³  ì¬ë£Œ
  const ingredients = [];

  function addIngredient() {
    const nameInput = document.getElementById('ing-name');
    const qtyInput = document.getElementById('ing-qty');
    const name = (nameInput.value || '').trim();
    const qty = (qtyInput.value || '').trim() || '1ê°œ';
    if (!name) {
      alert('ì¬ë£Œ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”!');
      return;
    }
    ingredients.push({ name, qty });
    nameInput.value = '';
    qtyInput.value = '';
    renderIngredients();
  }

  function renderIngredients() {
    const ul = document.getElementById('ingredient-list');
    const empty = document.getElementById('empty-ing');
    ul.innerHTML = '';
    if (!ingredients.length) {
      empty.style.display = 'block';
      return;
    }
    empty.style.display = 'none';
    ingredients.forEach((item, idx) => {
      const li = document.createElement('li');
      li.className = 'ingredient-item';
      li.innerHTML = `
        <span>${item.name} <strong style="color:#f97316;">${item.qty}</strong></span>
        <button type="button" style="border:none;background:#fee2e2;color:#b91c1c;border-radius:0.7rem;padding:0.25rem 0.55rem;font-size:0.7rem;cursor:pointer;"
                onclick="removeIngredient(${idx})">ì‚­ì œ</button>
      `;
      ul.appendChild(li);
    });
  }

  function removeIngredient(idx) {
    ingredients.splice(idx, 1);
    renderIngredients();
  }

  // AI ì…°í”„ ë°ëª¨ ë ˆì‹œí”¼
  function showDemoRecipe() {
    const title = document.getElementById('recipe-title');
    const mats = document.getElementById('recipe-materials');
    const stepsBox = document.getElementById('recipe-steps');
    const tip = document.getElementById('recipe-tip');
    const box = document.getElementById('recipe-result');

    title.textContent = 'ì—ì–´í”„ë¼ì´ì–´ ê¹€ì¹˜ ì‚¼ê²¹ì‚´ êµ¬ì´';
    mats.textContent = 'ì‚¼ê²¹ì‚´, ê¹€ì¹˜, ì–‘íŒŒ, ê°„ì¥, ì„¤íƒ•';
    stepsBox.innerHTML = '';
    [
      'ì‚¼ê²¹ì‚´ì„ í•œ ì… í¬ê¸°ë¡œ ì°ì–´ì£¼ì„¸ìš”.',
      'ê¹€ì¹˜ì™€ ì–‘íŒŒë¥¼ ë¨¹ê¸° ì¢‹ì€ í¬ê¸°ë¡œ ìë¦…ë‹ˆë‹¤.',
      'ë³¼ì— ê°„ì¥ê³¼ ì„¤íƒ•ì„ ë„£ê³  ì–‘ë…ì¥ì„ ë§Œë“­ë‹ˆë‹¤.',
      'ê³ ê¸°ì™€ ê¹€ì¹˜, ì–‘íŒŒë¥¼ ì–‘ë…ì¥ì— ë²„ë¬´ë¦½ë‹ˆë‹¤.',
      'ì—ì–´í”„ë¼ì´ì–´ì— ë„£ê³  180ë„ì—ì„œ 12~15ë¶„ ì •ë„ êµ¬ì›Œì£¼ì„¸ìš”.'
    ].forEach(s => {
      const p = document.createElement('p');
      p.textContent = 'ğŸ³ ' + s;
      stepsBox.appendChild(p);
    });
    tip.textContent = 'Tip: ë§ˆì§€ë§‰ 3ë¶„ì€ ì˜¨ë„ë¥¼ ì¡°ê¸ˆ ì˜¬ë ¤ì£¼ë©´ ê²‰ì€ ë°”ì‚­, ì†ì€ ì´‰ì´‰í•´ì ¸ìš”.';
    box.style.display = 'block';
  }

  // í”„ë¡œí•„ ìƒíƒœ
  const profileState = {
    isEditing: false,
    goal: 'ì£¼ 3íšŒ ì§ì ‘ ìš”ë¦¬í•˜ê¸°',
    skill: 'ì´ˆë³´',
    favorites: ['ê³„ë€', 'ìŠ¤íŒ¸'],
    dislikes: ['ì˜¤ì´'],
    allergies: [],
    dietary: [],
    tools: ['í”„ë¼ì´íŒ¬', 'ëƒ„ë¹„']
  };

  function renderProfile() {
    // ëª©í‘œ
    document.getElementById('goalInput').value = profileState.goal;

    // ì‹¤ë ¥ ë²„íŠ¼
    document.querySelectorAll('.skill-btn').forEach(btn => {
      const level = btn.getAttribute('data-level');
      btn.classList.toggle('active', level === profileState.skill);
      if (profileState.isEditing) {
        btn.classList.remove('disabled');
      } else {
        btn.classList.add('disabled');
      }
    });

    // ì¸í’‹/ë²„íŠ¼ í™œì„±í™”
    const edit = profileState.isEditing;
    document.getElementById('goalInput').disabled = !edit;

    const mapping = [
      ['favorite', 'favInput', 'favBtn', profileState.favorites, 'favTags'],
      ['dislike', 'dislikeInput', 'dislikeBtn', profileState.dislikes, 'dislikeTags'],
      ['allergy', 'allergyInput', 'allergyBtn', profileState.allergies, 'allergyTags'],
      ['diet', 'dietInput', 'dietBtn', profileState.dietary, 'dietTags'],
      ['tool', 'toolInput', 'toolBtn', profileState.tools, 'toolTags']
    ];

    mapping.forEach(([kind, inputId, btnId, list, tagId]) => {
      const input = document.getElementById(inputId);
      const btn = document.getElementById(btnId);
      input.disabled = !edit;
      btn.disabled = !edit;
      renderTags(tagId, list, kind, edit);
    });

    // ë²„íŠ¼ í…ìŠ¤íŠ¸
    const b = document.getElementById('editSaveBtn');
    if (edit) {
      b.textContent = 'âœ¨ ì €ì¥í•˜ê¸°';
      b.style.background = `linear-gradient(135deg, ${'var(--green)'}, ${'var(--green-deep)'})`;
    } else {
      b.textContent = 'âš™ï¸ ìˆ˜ì •í•˜ê¸°';
      b.style.background = `linear-gradient(135deg, ${'var(--amber)'}, ${'var(--amber-deep)'})`;
    }
  }

  function renderTags(containerId, list, kind, editable) {
    const box = document.getElementById(containerId);
    box.innerHTML = '';
    if (!list.length) {
      const span = document.createElement('span');
      span.style.fontSize = '0.78rem';
      span.style.color = '#9ca3af';
      span.textContent = 'ë“±ë¡ëœ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤';
      box.appendChild(span);
      return;
    }
    list.forEach((val, idx) => {
      const badge = document.createElement('span');
      badge.className = 'badge';
      badge.textContent = val;
      if (editable) {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.textContent = 'âœ•';
        btn.onclick = () => removeTag(kind, idx);
        badge.appendChild(btn);
      }
      box.appendChild(badge);
    });
  }

  function toggleEdit() {
    if (!profileState.isEditing) {
      profileState.isEditing = true;
      renderProfile();
    } else {
      // ì €ì¥
      profileState.goal = document.getElementById('goalInput').value;
      profileState.isEditing = false;
      renderProfile();
      showToast('success', 'í”„ë¡œí•„ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤ (ë°ëª¨)');
      console.log('ì €ì¥ëœ í”„ë¡œí•„(ë°ëª¨):', profileState);
    }
  }

  function setSkill(level) {
    if (!profileState.isEditing) return;
    profileState.skill = level;
    renderProfile();
  }

  function addTag(kind) {
    if (!profileState.isEditing) return;
    let inputId, list;
    if (kind === 'favorite') { inputId = 'favInput'; list = profileState.favorites; }
    else if (kind === 'dislike') { inputId = 'dislikeInput'; list = profileState.dislikes; }
    else if (kind === 'allergy') { inputId = 'allergyInput'; list = profileState.allergies; }
    else if (kind === 'diet') { inputId = 'dietInput'; list = profileState.dietary; }
    else if (kind === 'tool') { inputId = 'toolInput'; list = profileState.tools; }

    const input = document.getElementById(inputId);
    const v = (input.value || '').trim();
    if (!v) return;
    if (list.includes(v)) {
      showToast('info', `'${v}'ì€(ëŠ”) ì´ë¯¸ ë“±ë¡ë˜ì–´ ìˆìŠµë‹ˆë‹¤`);
      input.value = '';
      return;
    }
    list.push(v);
    input.value = '';
    renderProfile();
  }

  function removeTag(kind, idx) {
    if (!profileState.isEditing) return;
    if (kind === 'favorite') profileState.favorites.splice(idx, 1);
    else if (kind === 'dislike') profileState.dislikes.splice(idx, 1);
    else if (kind === 'allergy') profileState.allergies.splice(idx, 1);
    else if (kind === 'diet') profileState.dietary.splice(idx, 1);
    else if (kind === 'tool') profileState.tools.splice(idx, 1);
    renderProfile();
  }

  function onEnter(e, kind) {
    if (e.key === 'Enter') {
      e.preventDefault();
      addTag(kind);
    }
  }

  // ì´ˆê¸° ë Œë”
  renderIngredients();
  renderProfile();
</script>
</body>
</html>
