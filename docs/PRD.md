# PRD

PRD (10주차 과제)

**프로젝트 개요 (The "Vibe" in Spec)**

- **프로젝트 명**: FridgeChef (내 냉장고 속 AI 셰프)
- **핵심 컨셉**: AI가 냉장고 속 재료와 개인 프로필을 분석해 최적의 맞춤형 레시피를 생성하고, 요리 과정의 문제 해결까지 실시간으로 지원하는 초개인화 쿠킹 솔루션. '절약', '맞춤', '성공적인 경험'을 Vibe로 한다.
- **핵심 목표**: 사용자가 냉장고 재료를 효율적으로 활용하여 음식물 낭비를 줄이고, 요리 초보자도 쉽게 요리에 성공하여 자신감을 얻도록 한다.
- **타겟 페르소나:**
    
    > 이름 : 김지금
    나이 : 23세
    직업 : 대학생(현재 대학교 근처에서 자취 중)
    상황 : 김지금씨는 현재 대학생으로 주머니 상황이 넉넉하지 않다. 알바 월급이 들어오기 전에 돈을 아끼고자, 집에 있는 재료를 통해 음식을 먹으려고 한다. 자취생이다보니 냉장고 속 재료도 많지 않다. 얼마 전 엄마가 놓고 간 김치와 양파등의 기본적인 식재료가 있다. 물론 배달음식을 많이 시켜 먹었기에 남아있는 각종 소스들과 탄산음료가 전부이다. 불행 중 다행히도 얼마 전 친구들과 삼겹살 파티를 하고 남은 삼겹살을 가지고 온 덕분에 삼겹살까지 있는 상황이다. 김지금씨는 요리를 잘 할 줄 모르고, 관련된 정보도 많이 없기에 직접 찾아보기에도 어려운 상황이다. 그러한 상황에서 집에 있는 재료를 효율적으로 활용하여 요리를 하고 싶어하는 상황이다.
    > 
- 선호: 간단한 요리, 에어프라이어 사용 선호, 식비 절감.
- 특징: 레시피 탐색에 시간을 들이기 싫어하며, 요리 중 발생하는 돌발 상황에 대처가 어렵다.

상세 기능 명세
P0 (Core Features - MVP)

- **나의 냉장고: 간편 재료 등록 시스템**
    
    [User Story] 사용자가 식재료를 등록할 수 있는 방법은 총 3가지이다. 첫 번째는 냉장고의 사진을 촬영하여 등록하는 방법이다. 냉장고 안에 있는 재료를 사진 촬영하여 재료를 AI가 인식하여 재료를 등록하여주는 방식이다. 두 번째 , 영수증 스캔은 영수증 스캔을 통해 내용을 입력받은 뒤, 구매한 식재료를 등록하는 방식이다. 마지막은 텍스트 입력을 통해 현재 보유한 식재료를 간편하게 등록할 수 있는 방식이다. 이 세가지 방식은 버튼 형식으로 제작 되어 있어서 사용자가 선택하여 등록할 수 있도록 한다. 세가지 버튼의 첫번째 버튼에는 냉장고 일러스트 이미지가 그려져 있고, 밑에 “냉장고 재료 촬영”과 같은 문구가 적혀 있다. 두 번째 버튼에는 영수증 모양 일러스트 이미지가 그려져 있고, 밑에 “영수증 내용 스캔”과 같은 문구가 적혀져 있다. 세 번째 버튼에는 텍스트를 의미하는 T라는 모양의 글자가 작성되어 있고 밑에는 “직접 입력”과 같은 멘트가 적혀있다. 버튼을 선택하면 관련 화면으로 넘어가는 형식이다.
    
    [Spec] 
    
    1. DB 구조 (Google Sheets): Sheets에 "냉장고 재료" 워크시트 생성.
    
    - 헤더: `id` (재료 고유 ID, UUID), `user_id` (사용자 ID), `item_name` (재료명), `quantity` (수량), `expiry_date` (유통기한), `registered_at` (등록일시)
    
    2. 등록 API (POST): 클라이언트가 Base64 인코딩된 이미지를 **`POST /api/fridge/items/image`**로 전송.
    
    3. AI 처리 (Vision API): Flask 백엔드는 Gemini-Pro-Vision API를 사용하여 이미지에서 식재료 목록 및 수량을 텍스트로 추출.
    
    4. Sheets 저장: 추출된 재료 정보와 함께 `id`, `user_id`, `registered_at`을 생성하여 "냉장고 재료" 시트에 **`append_row`**로 추가. (유통기한은 사용자가 직접 입력하거나 기본값 사용)
    
    5. 조회 API (GET): 클라이언트는 `GET /api/fridge/items` 호출 시, Flask 백엔드가 Sheets에서 해당 `user_id`에 맞는 레코드를 필터링하여 JSON으로 반환.
    
- **개인 프로필 설정 및 관리**
    
    [User Story] 사용자는 1.알레르기 정보 2.보유 조리 도구(에어프라이어 등), 3.개인 목표(다이어트, 비건, 저염식 등)를 설정할 수 있다. 프로필 설정 단계에서 알레르기 정보를 선택해서 받는다. (ex.알레르기가 있나요? YES를 선택하면 알레르기 입력) 보유 조리 도구는 항목을 선택한다. (ex. 보유 조리 도구목록에서(에어프라이기, 전자레인지, 인덕션을 아이콘과 이름으로 표시하고)에서 사용자가 선택을 하도록 만든다), 개인 목표는 (다이어트/비건/저염식) 중에 선택 할 수 있도록 하고, 맞춤 으로 레시피를 추천해주도록 한다.
    [Spec] 
    
    1. DB 구조 (Google Sheets): Sheets에 "사용자 프로필" 워크시트 생성.
    
    - 헤더: `user_id` (고유 ID), `preferences` (선호 재료), `dislikes` (비선호 재료), `allergies` (알레르기), `equipments` (보유 도구), `dietary_goals` (개인 목표)
    
    2. 데이터 포맷: `preferences`, `equipments` 등의 복잡한 데이터는 Flask 백엔드에서 JSON 문자열로 변환하여 Sheets 셀에 저장. 조회 시 다시 JSON 객체로 파싱하여 클라이언트에 반환.
    
    3. API Endpoints:
    
    - `GET /api/users/profile`: 해당 `user_id`의 프로필 레코드 조회.
    
    - `POST /api/users/profile`: 프로필 레코드를 찾아 업데이트 (Sheets의 특정 행 수정) 또는 새 레코드 추가.
    
- **AI 셰프: 맞춤 레시피 생성 및 추천**
    
    [User Story] 사용자는 등록된 재료와 개인 프로필에 종합적으로 최적화된 맞춤 레시피를 추천받고, 단계별 조리 가이드를 따라 요리를 시작할 수 있다. 레시피 생성 후 요리 시작을 누르면 요리 화면으로 넘어간다
    [Spec] 
    
    1. 데이터 취합 (Flask Backend): `POST /api/chef/recipe/generate` 요청이 들어오면, Flask 백엔드는 다음 데이터를 Google Sheets에서 조회한다.
    
    - 보유 재료: "냉장고 재료" 시트에서 해당 `user_id`의 모든 재료 목록 조회.
    
    - 개인 프로필: "사용자 프로필" 시트에서 프로필 정보 조회.
    
    2. 프롬프트 구성: 조회된 보유 재료, 프로필 데이터 및 요청 목적을 하나의 종합 프롬프트로 구성.
    
    3. AI 요청: 이 종합 프롬프트를 Gemini-Pro API로 전송하고, 응답은 파싱하기 쉬운 JSON 또는 특정 마크다운 구조로 요청.
    
    4. 소진율 로직: Flask 백엔드는 Gemini의 레시피 응답을 받아 레시피에 사용되는 재료가 보유 재료에서 차지하는 비율 (`보유 재료 소진율`)을 계산하여 레시피 객체에 필드로 추가.
    
    5. 응답: 계산된 소진율로 정렬된 레시피 목록을 JSON 형태로 클라이언트에게 반환.
    
- **AI 쿠킹 어시스턴트: 실시간 조리 지원 챗봇**
[User Story] 사용자는 요리 중 "간이 짜요", "A 재료 대신 B 재료 써도 되나요?"와 같은 돌발 상황 질문에 대해 실시간으로 맞춤형 해결책을 얻을 수 있다. 메뉴 선택>레시피 생성>요리시작 단계로 들어간 상태에서만 챗봇을 사용할 수 있다. 챗봇 아이콘을 클릭하면 챗봇을 사용할 수 있다.(채팅형)
[Spec]
    
    1. 컨텍스트 전달: 클라이언트는 `POST /api/chat/assistant` 요청 시, 사용자의 질문 외에 **`current_recipe_id`**와 **`current_step`**을 필수로 포함하여 전송.
    
    2. AI 처리 (Gemini Chat API): Flask 백엔드는 Gemini Chat API를 사용하여 사용자별, 레시피별 **대화 기록(History)**을 관리.
    
    3. 시스템 프롬프트: 시스템 명령어에 "당신은 요리 중 발생하는 모든 문제에 대해 레시피의 내용과 사용자의 현재 상황(현재 조리 단계, 보유 재료)을 고려하여 가장 안전하고 현실적인 해결책을 제시하는 전문 셰프 챗봇이다"라는 역할을 부여.
    
    4. 즉각적인 해결책: 사용자의 질문과 현재까지의 대화 기록, 레시피 전체 내용을 컨텍스트로 Gemini에 전달하여 실시간으로 맞춤형 조언을 생성하고 반환.
    

**P1 (Future Expansion)**

- 커뮤니티: 레시피 후기 공유
    
    [User Story] 사용자는 자신이 만든 요리의 완성 사진, 별점, 추천 내용을 커뮤니티에 공유하고 다른 사용자들의 후기를 참고하여 레시피 선택에 활용할 수 있다.
    [Spec] 커뮤니티 피드 화면 제공. 사용자는 **POST /api/recipes/{id}/review**를 통해 후기(사진, 별점, 내용)를 작성하며, 후기 목록은 **GET /api/recipes/{id}/reviews**로 조회된다.
    
- 제휴/커머스 연동
    
    [User Story] AI 추천 레시피를 선택했으나 재료가 부족할 경우, 해당 재료를 앱 내에서 바로 식재료 유통사(쿠팡, 마켓컬리 등)로 이동하여 구매할 수 있다.
    [Spec] 레시피 조회 시 부족한 재료 목록을 표시. 해당 재료 클릭 시 제휴 식재료 유통사의 **외부 커머스 URL**로 연결한다. (비즈니스 측면의 추가 수익원 확보 기능)
    
- 7. 프리미엄 구독 모델 (Freemium)
    
    [User Story] 사용자는 프리미엄 구독을 통해 광고 없는 환경, **무제한 AI 쿠킹 어시스턴트** 이용, 혹은 고급/특정 목표(예: 미슐랭급) 레시피 접근 등의 혜택을 누릴 수 있다. 추가로 프리미엄 모델을 구독할 시 음식을 조리할 때 AI에게 음성으로 물어 볼 수 있는 기능도 추가한다.
    [Spec] 구독 플랜을 구현하고, **AI 쿠킹 어시스턴트** 사용 횟수 등 핵심 기능을 구독 시 잠금 해제한다. 결제 시스템 연동 및 사용자 권한 관리.

-----

# FridgeChef 웜톤 모바일앱 식재료 등록 기능 상세명세
1. 기능 개요
세 가지 식재료 등록 방식

냉장고 내부 사진 촬영: 사용자가 직접 냉장고 내부 사진을 찍으면, AI가 이미지를 분석해 식재료를 자동으로 인식·등록한다.

영수증 내용 스캔: 영수증을 촬영하면 OCR을 통해 식재료 목록을 텍스트로 추출하여 한 번에 입력·추가할 수 있다.

직접 입력: 사용자가 수동으로 식재료명, 유통기한, 수량을 직접 입력하여 원하는 재료를 추가한다.

데이터 기록: 등록된 식재료는 프론트엔드(React Native 등)에서 DB(Supabase, Google Sheets 등)에 자동 저장된다.

소비 패턴 분석: 이후 AI가 소비 패턴과 유통기한, 레시피 매칭 등을 위해 데이터를 실시간 활용한다.

2. 화면 및 UI 구성
웜톤 배경: 아이보리 또는 크림색 배경, 각 카드/버튼에 테라코타 또는 머스타드 포인트 컬러 사용

버튼 및 카드 UI: 각 방식별 카드형 버튼, 둥근 테두리(12-16px), 은은한 그림자 효과

아이콘: 각 버튼 상단에 손그림 느낌의 일러스트(냉장고, 영수증, 텍스트)

텍스트 레이블: 제목(브라운 계열, 명조체), 설명(산세리프, 부드러운 밤색)

접근성 고려: 버튼 크기 확대, 명확한 안내문구와 음영 효과로 초보자도 쉽게 사용

3. 사용자 시나리오
[시나리오 예시]
Step 1: 자취생 사용자가 앱 첫 화면에서 ‘식재료 등록’ 버튼을 누르고, 세 가지 방식 중 한 가지를 선택

Step 2: (예: 냉장고 촬영 선택) 카메라 권한 허용 후, 내부 사진을 찍는다
→ 즉시 AI가 사진 속 식재료(예: 계란, 양파, 우유 등) 자동 인식하여 리스트로 보여줌

Step 3: 목록에서 불필요한 재료 삭제/수정 가능
→ ‘확인’ 누르면 DB에 자동 저장

Step 4: 사용자가 영수증을 선택할 경우, OCR 추출된 텍스트를 확인 후 등록
→ 직접 입력은 폼에 식재료/유통기한/수량을 써서 완료

Step 5: 등록이 끝나면, 홈 화면에서 전체 재료와 유통기한 임박 재료 안내를 바로 확인

4. 기능별 상세 흐름
기능	동작 플로우
냉장고 사진 촬영	카메라 권한 요청 → 사진 촬영 → AI 분석 → 자동 인식된 식재료 리스트 확인/수정 → 저장
영수증 내용 스캔	카메라 권한 요청 → 영수증 촬영 → OCR 분석 → 식재료 텍스트 추출 → 리스트 확인/편집 → 저장
직접 입력	입력폼(재료명, 유통기한, 수량) → 유효성 검사(필수) → 저장



-----
# **UX/UI Vibe 원칙: "따뜻한 집밥(Warm)"**

개발 및 디자인 시 다음 원칙을 최우선으로 고려합니다.

- **1. 미니멀리즘 (Minimalism):**
    - **Color Palette**: 따뜻하고 포근한 느낌을 주는 **아이보리, 크림빛의 연한 베이지 톤(#FFF8E7, #FDF6E3)**을 메인 배경색으로 사용.
    - **Accent Color**: 하이라이트, 선택된 요소에만 제한적으로 **진한 레드(#D94841), 테라코타(#D66F59), 머스타드 옐로우(#E1B866)** 중 한 가지 색상을 사용.
    - **UI Elements**: 부드러운 라운드 코너와 은은한 그림자 효과를 적용하되, 불필요한 장식이나 그라데이션 사용은 배제하여 심플하고 따뜻한 디자인 유지.
- **2. 가독성 (Readability):**
    - **Fonts**: 따뜻하고 친근한 **명조/세리프(Serif)** 계열 폰트를 단서 표기에 사용하여 클래식한 느낌 전달.
    - 그리드 내 입력 폰트는 동그란 모서리감과 부드러운 산세리프(Sans-serif)를 쓰며, 가독성과 친근감을 높임.
    - Layout: 퍼즐 그리드와 단서 목록을 명확히 분리하여, 사용자 입장에서 단서와 풀이 영역 간 자연스럽고 편안한 시선 이동이 가능하게 설계.
- **3. 방해 요소 최소화 (Non-distraction):**
    - Sound: 재료 추가 시 ‘미니멀 차임(Chime)’ 소리만 사용하며, 그 외 효과음 또는 배경음악(BGM)은 사용하지 않음.
    - Animation: 로딩 스피너 외에는 애니메이션 사용을 지양하여 시각적 방해를 차단하고, 심리적 안정감을 준다.
